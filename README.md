<!-- README.md is generated from README.Rmd. Please edit that file -->
[![Project Status: Concept â€“ Minimal or no implementation has been done yet, or the repository is only intended to be a limited example, demo, or proof-of-concept.](http://www.repostatus.org/badges/latest/concept.svg)](http://www.repostatus.org/#concept) [![Travis-CI Build Status](https://travis-ci.org/patperu/effisr.svg?branch=master)](https://travis-ci.org/patperu/effisr)

effisr
======

Example
-------

This is a basic example which shows you how to solve a common problem:

``` r
library(effisr)
library(sf)
```

    ## Linking to GEOS 3.6.1, GDAL 2.2.0, proj.4 4.9.3

``` r
res <- ef_current(country = "IT", limit = 50, ordering = "-firedate")
dplyr::glimpse(res$docs)
```

    ## Observations: 50
    ## Variables: 26
    ## $ objectid         <int> 325459, 325421, 325476, 325462, 325434, 32543...
    ## $ id               <int> 169826, 170136, 170135, 169829, 169836, 17013...
    ## $ countryful       <chr> "Italy", "Italy", "Italy", "Italy", "Italy", ...
    ## $ province         <chr> "Nuoro", "Reggio di Calabria", "Catania", "Pa...
    ## $ commune          <chr> "Torpe", "Montebello Ionico", "Castiglione di...
    ## $ firedate         <date> 2017-07-25, 2017-07-24, 2017-07-24, 2017-07-...
    ## $ area_ha          <int> 104, 628, 89, 239, 266, 140, 46, 83, 62, 89, ...
    ## $ broadlea         <dbl> 0.00, 0.00, 0.00, 0.00, 0.00, 31.69, 0.00, 0....
    ## $ conifer          <dbl> 10.28, 0.00, 0.00, 0.00, 34.96, 0.00, 0.00, 0...
    ## $ mixed            <dbl> 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.00, 0.0...
    ## $ scleroph         <dbl> 89.72, 8.81, 34.07, 82.55, 0.00, 0.00, 0.00, ...
    ## $ transit          <dbl> 0.00, 0.00, 0.00, 0.00, 29.70, 0.00, 0.00, 0....
    ## $ othernatlc       <dbl> 0.00, 43.59, 65.93, 2.13, 28.95, 0.00, 97.83,...
    ## $ agriareas        <dbl> 0.00, 46.31, 0.00, 0.00, 6.39, 68.31, 2.17, 5...
    ## $ artifsurf        <dbl> 0.00, 1.28, 0.00, 15.32, 0.00, 0.00, 0.00, 0....
    ## $ otherlc          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ...
    ## $ percna2k         <dbl> 0.00, 0.00, 100.00, 50.10, 88.17, 0.00, 47.67...
    ## $ lastupdate       <date> 2017-07-25, 2017-07-25, 2017-07-25, 2017-07-...
    ## $ ba_class         <chr> "07DAYS", "07DAYS", "07DAYS", "07DAYS", "07DA...
    ## $ mic              <chr> NA, "YES", NA, "YES", "YES", NA, NA, NA, NA, ...
    ## $ se_anno_cad_data <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N...
    ## $ critech          <chr> NA, "YES", NA, NA, NA, NA, NA, NA, NA, NA, NA...
    ## $ country          <chr> "IT", "IT", "IT", "IT", "IT", "IT", "IT", "IT...
    ## $ lon              <dbl> 9.664751, 15.714852, 15.154927, 13.207316, 16...
    ## $ lat              <dbl> 40.61132, 37.96695, 37.87751, 38.10746, 41.89...
    ## $ geo_shape        <simple_feature> POLYGON((9.66045285299998 4..., PO...

``` r
plot(res$docs$geo_shape)
```

![](README_files/figure-markdown_github/example-1.png)

``` r
library(ggplot2)

x <- res$docs

gg <- ggplot(x) +
      geom_sf(aes(color = area_ha,
                  size = area_ha, 
                  geometry = geo_shape)) +
      ggtitle("Fire") +
      theme(legend.position="bottom") 
gg
```

![](README_files/figure-markdown_github/unnamed-chunk-1-1.png)

``` r
x <- ef_trend(country = "IT", decimate = 7)

dplyr::glimpse(x)
```

    ## Observations: 54
    ## Variables: 8
    ## $ country     <chr> "IT", "IT", "IT", "IT", "IT", "IT", "IT", "IT", "I...
    ## $ day         <date> 1976-01-01, 1976-01-08, 1976-01-15, 1976-01-22, 1...
    ## $ year_first  <int> 2008, 2008, 2008, 2008, 2008, 2008, 2008, 2008, 20...
    ## $ year_last   <int> 2016, 2016, 2016, 2016, 2016, 2016, 2016, 2016, 20...
    ## $ historic_nf <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
    ## $ historic_ba <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 21, 21, 21, 56, 56, ...
    ## $ current_nf  <dbl> 0, 1, 1, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 7, 9,...
    ## $ current_ba  <dbl> 0, 84, 84, 2487, 2487, 2487, 2487, 2487, 2487, 248...

``` r
gg <- ggplot(x, aes(day, current_ba, group = country, color = country)) + geom_line()
gg <- gg + scale_x_date(expand=c(0,1), limits=range(x$day))
gg <- gg + labs(x=NULL,
                title="Burnt Areas 2017",
                subtitle="",
                caption="Source: EFFIS")
gg <- gg + theme_bw()
gg
```

    ## Warning: Removed 23 rows containing missing values (geom_path).

![](README_files/figure-markdown_github/unnamed-chunk-2-1.png)

Fires
=====

``` r
x <- ef_fires(country = "IT", limit = 100)
dplyr::glimpse(x)
```

    ## Observations: 100
    ## Variables: 12
    ## $ fireId         <int> 169829, 169826, 170136, 169836, 170138, 170135,...
    ## $ detected       <dttm> 2017-07-23 22:00:00, 2017-07-24 22:00:00, 2017...
    ## $ updated        <dttm> 2017-07-26, 2017-07-25, 2017-07-25, 2017-07-25...
    ## $ area           <dbl> 239, 104, 628, 266, 140, 89, 46, 192, 83, 112, ...
    ## $ country        <int> 112, 112, 112, 112, 112, 112, 112, 112, 112, 11...
    ## $ adminSublevel1 <int> 1356, 1355, 1345, 1343, 1345, 1356, 1345, 1345,...
    ## $ adminSublevel2 <int> 18887, 18877, 18818, 18810, 18815, 18884, 18818...
    ## $ adminSublevel3 <int> 50544, 50070, 44945, 44371, 44638, 50349, 44943...
    ## $ adminSublevel4 <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
    ## $ lon            <dbl> 13.207316, 9.664751, 15.714852, 16.048507, 16.7...
    ## $ lat            <dbl> 38.10746, 40.61132, 37.96695, 41.89622, 39.0387...
    ## $ country_iso2   <chr> "IT", "IT", "IT", "IT", "IT", "IT", "IT", "IT",...

Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.
